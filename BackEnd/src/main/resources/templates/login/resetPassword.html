<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DINEEASE - 餐廳管理系統</title>

<link rel="icon" th:href="@{/images/favicon.ico}" />
<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />

<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
	integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
	crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100..900&display=swap" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
<link rel="stylesheet" th:href="@{/css/login.css}" />
</head>
<style>
/* 回到登入頁的連結樣式 */
.back-to-login {
    margin-top: 20px;  /* 與表單有些距離 */
    text-align: center;  /* 讓按鈕居中 */
}

.back-to-login .btn-link {
    display: inline-block;
    padding: 12px 24px;
    font-size: 1rem;
    color: #fff;  /* 按鈕文字顏色 */
    background-color: #007bff;  /* 藍色背景 */
    border: none;
    border-radius: 30px;  /* 圓角效果 */
    text-align: center;
    text-decoration: none;  /* 去掉連結的下劃線 */
}

.back-to-login .btn-link:hover {
    background-color: #0056b3;  /* 懸停時顏色變深 */
}
</style>
<body>
	<script>
        window.onload = function() { 
            const options = {
                strings: [
                    "一鍵登入，簡化餐廳經營，讓美味更輕鬆！",
                    "一鍵登入，簡化餐廳經營，讓服務更流暢！",
                    "一鍵登入，簡化餐廳經營，讓顧客更滿意！"
                ],
                typeSpeed: 50,      
                backSpeed: 50,      
                backDelay: 1000,    
                startDelay: 500,    
                loop: true,
                showCursor: false
            };
            const typed = new Typed("#typing-effect", options);
        };
    </script>

	<div class="img-container">
        <img th:src="@{/images/logo.jpg}" alt="Logo">
    </div>
	<div class="triangle"></div>
	<div class="title">
		<div class="title-box">
			<h1>DINEEASE</h1>
			<h3>讓餐廳經營變簡單</h3>
			<h3 id="typing-effect"></h3>
		</div>
	</div>

	<div class="box">
	    <div class="wrapper">
	        <form th:action="@{/Employee/resetPassword}" method="post" id="resetPasswordForm">
	            <h1>重新修改密碼</h1>
	            <div class="input-box">
	                <input type="text" name="employeeAccount" placeholder="使用者帳號" required />
	                <i class="bx bxs-user"></i>
	            </div>
	            <div class="input-box">
	                <input type="password" id="password" name="employeePassword" placeholder="密碼" required 
	                       pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$"
	                       title="密碼需包含大寫字母、小寫字母、數字及特殊字符，且長度不少於 6 位。" />
	                <i class="fa-solid fa-eye" id="lock1" style="cursor: pointer"></i> <!-- 密碼眼睛 -->
	            </div>
	            <div class="input-box">
	                <input type="password" id="confirmPassword" name="confirmPassword" placeholder="再次輸入密碼" required 
	                       pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$"
	                       title="密碼需包含大寫字母、小寫字母、數字及特殊字符，且長度不少於 6 位。" />
	                <i class="fa-solid fa-eye" id="lock2" style="cursor: pointer"></i> <!-- 確認密碼眼睛 -->
	            </div>
	            
	            <button type="submit" class="btn">修改密碼</button>
	        </form>
			<div class="back-to-login">
			    <a href="/" class="btn btn-link">回到登入頁</a>
			</div>
	    </div>
	</div>

	<script>
		document.addEventListener("DOMContentLoaded", function() {
	        // 密碼可見切換
	        document.getElementById("lock1").addEventListener("click", function() {
	            togglePasswordVisibility("password");
	        });
	        
	        document.getElementById("lock2").addEventListener("click", function() {
	            togglePasswordVisibility("confirmPassword");
	        });
	
	        // 密碼一致性驗證
	        document.getElementById("resetPasswordForm").addEventListener("submit", function(event) {
	            let password = document.getElementById("password").value;
	            let confirmPassword = document.getElementById("confirmPassword").value;
	
	            if (password !== confirmPassword) {
	                event.preventDefault();  // 阻止表單提交
	                alert("密碼不一致，請重新輸入。");  // 顯示錯誤訊息的彈出框
	            }
	        });
	
	        // 切換密碼可見
	        function togglePasswordVisibility(id) {
	            let passwordField = document.getElementById(id);
	            let icon = document.getElementById(id === "password" ? "lock1" : "lock2");
	
	            if (passwordField.type === "password") {
	                passwordField.type = "text";
	                icon.classList.add("fa-eye-slash");
	                icon.classList.remove("fa-eye");
	            } else {
	                passwordField.type = "password";
	                icon.classList.add("fa-eye");
	                icon.classList.remove("fa-eye-slash");
	            }
	        }
	    });
	</script>
</body>
</html>
